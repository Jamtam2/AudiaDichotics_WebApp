// app/views/stripe_checkout/create.js.erb

// Check if session was successfully created
var stripe = Stripe('[PUBLIC_KEY]'***REMOVED***; // Replace with your actual publishable key
<% if @session.present? %>
  // Use Stripe.js to redirect to the Checkout page
  stripe.redirectToCheckout({ sessionId: '<%= @session.id %>' ***REMOVED******REMOVED***.then(function (result***REMOVED*** {
    // If `redirectToCheckout` fails due to a browser or network
    // error, you should display the localized error message to your
    // customer using `result.error.message`.
    if (result.error***REMOVED*** {
      alert(result.error.message***REMOVED***;
    ***REMOVED***
  ***REMOVED******REMOVED***;
<% else %>
  // Handle error or inform the user if session wasn't created
  alert('There was an issue initiating the Stripe Checkout. Please try again.'***REMOVED***;
<% end %>
