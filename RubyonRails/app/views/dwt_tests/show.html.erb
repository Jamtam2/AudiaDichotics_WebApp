<h1><b><center><%= @dwt_test.test_type%> Test Information and Results</center></b></h1>
<hr>
<div class="container">
    <div class="row">
        <div class="col-sm">
            <h2><center><b>Left Ear Score</b></center></h2>
            <h2><center><b><%= @dwt_test.left_score%>%</b></center></h2>
            <h2><center><b>Left Ear Percentile</b></center></h2>
            <h3><center><b><%= @dwt_test.left_percentile%></b></center></h3>
        </div>
        <div class="col-sm">
            <%= image_tag 'head image.png', class: 'w-40 img-responsive center-block', style: 'max-width: 20rem;' %>
        </div>
        <div class="col-sm">
            <h2><center><b>Right Ear Score</b></center></h2>
            <h2><center><b><%= @dwt_test.right_score%>%</b></center></h2>
            <h2><center><b>Right Ear Percentile</b></center></h2>
            <h3><center><b><%= @dwt_test.right_percentile%></b></center></h3>
        </div>
    </div>
<div>
<h1><b><center>Dominant Ear</center></b></h1>
<h2><b><center><%= @dwt_test.ear_advantage%></b></center></h2>
<h1><b><center>Ear Advantage Score</center></b></h1>
<h2><b><center><%= @dwt_test.ear_advantage_score%>%</b></center></h2>
<h1><b><center>Ear Advantage Percentile</center></b></h1>
<h2><b><center><%= @dwt_test.advantage_percentile%>%</b></center></h2>

<hr>

<h1><b>Interpretation of Test</b></h1>
<h2><b><%= @dwt_test.interpretation%></b></h2>

<hr>

<h1><b><center>Scores and Data Presented in Tables Like Test Page</center></b></h1>
<h3><b>Scores Table</b></h3>
<table class="table table-sm table-bordered m1-4" style="max-width: 25rem;">
    <thead>
        <tr>
            <th scope="col">Pairs</th>
            <th scope="col">Left</th>
            <th scope="col">Right</th>
            <th scope="col">Ear Adv</th>
        </tr>
        <tbody>
            <tr>
                <th scope="row">1</th>
                <td class="left-column"><%= @dwt_test.left_score%></span>%</p></td>
                <td class="right-column"><%= @dwt_test.right_score%></span>%</td>
                <td class="ear-advantage"><%= @dwt_test.ear_advantage_score%>0</span>%</td>
            </tr>
            <tr>
                <th scope="row">2</th>
            </tr>
            <tr>
                <th scope="row">3</th>           
            </tr>
        </tbody>
    </thead>
</table>
<hr>
<h3><b>Percentile Table</b></h3>
<table class="table table-sm table-bordered m1-4" style="max-width: 25rem;">
    <thead>
        <tr>
            <th scope="col">Left Ear</th>
            <th scope="col">Right Ear</th>
            <th scope="col">Ear Advantage</th>
        </tr>
        <tbody>
            <tr>
                <td class="percentile"><%= @dwt_test.left_percentile%></span></td>
                <td class="percentile"><%= @dwt_test.right_percentile%></span></td>
                <td class="percentile"><%= @dwt_test.advantage_percentile%></span></td>
            </tr>
        </tbody>
    </thead>
</table>
<hr>

<style>
    .left-column {
        background-color: lightblue;
    ***REMOVED***
    
    .right-column {
        background-color: lightpink;
    ***REMOVED***

</style>



<script>
    const earAdvantageCells = document.querySelectorAll('.ear-advantage'***REMOVED***;
    const percentileCells = document.querySelectorAll('.percentile'***REMOVED***;
    
    // Loop through each ear advantage cell
    earAdvantageCells.forEach(cell => {
    // Get the value of the cell
    const value = parseFloat(cell.textContent***REMOVED***;

    // Check the value and set the background color accordingly
    if (value < 0***REMOVED*** {
        cell.style.backgroundColor = 'lightblue';
    ***REMOVED*** else if (value > 0***REMOVED*** {
        cell.style.backgroundColor = 'lightpink';
    ***REMOVED*** else {
        cell.style.backgroundColor = 'white';
    ***REMOVED***
    ***REMOVED******REMOVED***;

    percentileCells.forEach(cell => {
    // Get the value of the cell
    const percValue = cell.textContent.trim(***REMOVED***;

    // Check the value and set the background color accordingly
    if ((percValue == "5th Percentile"***REMOVED******REMOVED*** {
        cell.style.backgroundColor = 'lightpink';
    ***REMOVED*** 
    else if (percValue == "10th Percentile"***REMOVED*** {
        cell.style.backgroundColor = 'hsl(60, 100%, 70%***REMOVED***';
    ***REMOVED*** 
    else if (percValue == "25th Percentile"***REMOVED*** {
        cell.style.backgroundColor = 'lightgreen';
    ***REMOVED***
    else{
        cell.style.backgroundColor = 'lightblue';
    ***REMOVED***
    ***REMOVED******REMOVED***;
</script>